@model BarManegment.Areas.Admin.ViewModels.OathAttendeesViewModel
@{
    ViewBag.Title = "كشف بأسماء المحامين الذين أدوا اليمين القانونية";
    Layout = "~/Areas/Admin/Views/Shared/_PrintCaesLayout.cshtml"; // استخدام Layout الطباعة
}

@section styles {
    <style>
        /* --- 1. تنسيق الترويسة --- */
        .letterhead-img {
            width: 100%;
            height: auto;
            margin-bottom: 20px; /* تقليل المسافة قليلًا */
        }

        /* --- 2. تنسيق العنوان الديناميكي (تصغير الخط) --- */
        .dynamic-header {
            text-align: center;
            margin-bottom: 25px;
        }

            .dynamic-header h3 {
                font-weight: bold;
                margin-bottom: 5px;
                font-size: 1.4rem; /* تصغير (كان 1.6) */
                text-decoration: underline;
                color: #000;
            }

            .dynamic-header p {
                font-size: 1.1rem; /* تصغير (كان 1.3) */
                margin: 0;
                color: #000;
            }

        /* --- 3. تنسيق الجدول (تصغير الخط) --- */
        .attendee-table {
            width: 100%;
            margin-bottom: 30px;
            border-collapse: collapse;
            border: 1px solid #000;
        }

            .attendee-table th, .attendee-table td {
                border: 1px solid #000;
                padding: 6px 10px; /* تقليل الحشو */
                text-align: right;
                vertical-align: middle;
                font-size: 1.0rem; /* تصغير (كان 1.1) */
                color: #000;
            }

            .attendee-table th {
                background-color: #f2f2f2;
                font-weight: 600;
                text-align: center;
            }

        /* --- 4. تنسيق التواقيع (تصغير الخط + 3 في السطر) --- */
        .signatures {
            margin-top: 40px;
            color: #000;
        }

            .signatures h5 {
                font-weight: bold;
                text-align: center;
                margin-bottom: 30px;
                text-decoration: underline;
                font-size: 1.2rem; /* تصغير (كان 1.3) */
            }

        .sig-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between; /* توزيع المسافات */
        }

        /* === التعديل: تغيير العرض ليناسب 3 في السطر === */
        .sig-block {
            width: 32%; /* بدلاً من 48% */
            text-align: center;
            margin-bottom: 30px;
            page-break-inside: avoid;
        }

            .sig-block p {
                font-size: 1.0rem; /* تصغير (كان 1.2) */
                margin-bottom: 5px;
                font-weight: 600;
            }

        .sig-line {
            border-bottom: 1px dotted #555;
            height: 30px;
            margin-top: 10px;
        }
    </style>
}

@* --- 1. الترويسة الرسمية (الصورة المرفقة) --- *@
 
@* --- 2. العنوان الديناميكي (ما يتغير في كل طباعة) --- *@
<div class="dynamic-header">
    <h3>@ViewBag.Title</h3>
    <p>المنعقدة في @(Model.Location ?? "مقر النقابة")</p>
    <p>يوم: @Model.CeremonyDate.ToString("dddd، dd MMMM yyyy", new System.Globalization.CultureInfo("ar-JO"))</p>
</div>

@* --- 3. جدول الحاضرين --- *@
<table class="attendee-table">
    <thead>
        <tr>
            <th style="width: 5%;">م</th>
            <th>اسم المحامي</th>
            <th style="width: 25%;">الرقم الوطني</th>
            <th style="width: 20%;">رقم العضوية  </th>
           
        </tr>
    </thead>
    <tbody>
        @{ int counter = 1; }
        @foreach (var attendee in Model.Attendees.OrderBy(a => a.ArabicName))
        {
            <tr>
                <td style="text-align: center;">@(counter++)</td>
                <td>@attendee.ArabicName</td>
                <td style="text-align: center;">@attendee.NationalIdNumber</td>
                <td style="text-align: center;"><strong>@attendee.MembershipId</strong></td>
               
            </tr>
        }
        @if (!Model.Attendees.Any())
        {
            <tr><td colspan="5" class="text-center text-muted">لم يتم تعيين أي متدربين لهذا الموعد.</td></tr>
        }
    </tbody>
</table>

@* --- 4. جدول التواقيع --- *@
<div class="signatures">
    <h5>توقيع أعضاء المجلس الحاضرين</h5>
    <div class="sig-container">
        @foreach (var member in Model.SigningMembers.OrderBy(m => m.Id))
        {
            <div class="sig-block">
                <p>@member.Title</p>
                <p>@member.Name</p>
                <div class="sig-line"></div>
            </div>
        }
        @if (!Model.SigningMembers.Any())
        {
            <p class="text-center text-muted">لم يتم جلب بيانات أعضاء المجلس.</p>
        }
    </div>
</div>