@model BarManegment.Models.OralExamCommittee
@{
    ViewBag.Title = "كشف رصد درجات الاختبار الشفوي";
    Layout = "~/Areas/Admin/Views/Shared/_PrintDocumentsLayout.cshtml";
}

<style>
    .header-box {
        text-align: center;
        margin-bottom: 30px;
        border-bottom: 2px solid #000;
        padding-bottom: 15px;
    }

    .committee-info {
        margin-bottom: 20px;
        font-size: 14px;
    }

    .score-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
    }

        .score-table th, .score-table td {
            border: 1px solid #000;
            padding: 8px;
            text-align: center;
        }

        .score-table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }

    .trainee-name {
        text-align: right;
        font-weight: bold;
        padding-right: 10px;
    }

    .signatures {
        margin-top: 50px;
        display: flex;
        justify-content: space-around;
    }

    .sig-box {
        text-align: center;
        width: 200px;
    }

    .sig-line {
        margin-top: 40px;
        border-top: 1px solid #000;
    }
</style>

<div class="page">
    <div class="header-box">
        <h2>نقابة المحامين الفلسطينيين</h2>
        <h3>كشف رصد درجات الاختبار الشفوي النهائي</h3>
        <h4>دورة: @Model.CommitteeName</h4>
    </div>

    <div class="committee-info">
        <strong>تاريخ الانعقاد:</strong> __________________ الموافق: @DateTime.Now.ToString("yyyy/MM/dd")
    </div>

    <table class="score-table">
        <thead>
            <tr>
                <th rowspan="2" style="width: 5%;">م</th>
                <th rowspan="2" style="width: 25%;">اسم المتدرب</th>
                <th rowspan="2" style="width: 10%;">رقم المتدرب</th>
                @* أعمدة لأعضاء اللجنة *@
                <th colspan="@Model.Members.Count">درجات أعضاء اللجنة (من 100)</th>
                <th rowspan="2" style="width: 10%;">المتوسط</th>
                <th rowspan="2" style="width: 10%;">النتيجة النهائية</th>
            </tr>
            <tr>
                @foreach (var member in Model.Members)
                {
                    <th>@member.MemberLawyer.ArabicName<br><span style="font-size: 9px; font-weight: normal;">(@member.Role)</span></th>
                }
            </tr>
        </thead>
        <tbody>
            @{ int i = 1; }
            @foreach (var enrollment in Model.Enrollments.OrderBy(e => e.Trainee.ArabicName))
            {
                <tr>
                    <td>@(i++)</td>
                    <td class="trainee-name">@enrollment.Trainee.ArabicName</td>
                    <td>@enrollment.Trainee.TraineeSerialNo</td>

                    @* خلايا فارغة للرصد اليدوي *@
                    @foreach (var member in Model.Members)
                    {
                        <td></td>
                    }

                    <td></td> @* المتوسط *@
                    <td></td> @* النتيجة *@
                </tr>
            }
            @* صفوف فارغة إضافية إذا لزم الأمر *@
            @for (int j = 0; j < 3; j++)
            {
                <tr>
                    <td>@(i++)</td>
                    <td></td>
                    <td></td>
                    @foreach (var member in Model.Members)
                    {
                        <td></td>
}
                    <td></td>
                    <td></td>
                </tr>
            }
        </tbody>
    </table>

    <div class="signatures">
        @foreach (var member in Model.Members)
        {
            <div class="sig-box">
                <strong>@member.Role</strong>
                <br>
                @member.MemberLawyer.ArabicName
                <div class="sig-line">التوقيع</div>
            </div>
        }
    </div>

    <div style="margin-top: 30px; font-size: 11px; text-align: center;">
        * درجة النجاح هي 60% من مجموع العلامات.
    </div>
</div>
