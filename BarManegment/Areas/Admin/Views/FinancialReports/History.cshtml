@model IEnumerable<BarManegment.Models.FeeDistribution>
@{
    ViewBag.Title = "أرشيف الحصص المرسلة للبنك";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<h2><i class="bi bi-archive-fill me-2"></i> @ViewBag.Title</h2>

@using (Html.BeginForm("History", "FinancialReports", FormMethod.Get, new { @class = "row g-3 mb-3 p-3 bg-light rounded border" }))
{
    <div class="col-md-4">
        <label for="from" class="form-label">من تاريخ (تاريخ الإرسال)</label>
        <input type="date" name="from" id="from" class="form-control" value="@ViewBag.FromDate" />
    </div>
    <div class="col-md-4">
        <label for="to" class="form-label">إلى تاريخ (تاريخ الإرسال)</label>
        <input type="date" name="to" id="to" class="form-control" value="@ViewBag.ToDate" />
    </div>
    <div class="col-md-4 d-flex align-items-end">
        <button type="submit" class="btn btn-info w-100">
            <i class="bi bi-filter"></i> تصفية
        </button>
    </div>
}
<hr />
<p>@Html.ActionLink("العودة للتقرير الرئيسي", "Index", null, new { @class = "btn btn-outline-secondary" })</p>

<table class="table table-sm table-striped">
    <thead>
        <tr>
            <th>تاريخ الإرسال</th>
            <th>اسم المحامي</th>
            <th>رقم المعاملة</th>
            <th>المبلغ</th>
        </tr>
    </thead>
    <tbody>
        @if (!Model.Any())
        {
            <tr>
                <td colspan="4" class="text-center text-muted p-4">
                    لا يوجد بيانات لعرضها.
                </td>
            </tr>
        }
        @foreach (var item in Model)
        {
            <tr>
                <td>@(item.BankSendDate?.ToString("yyyy-MM-dd HH:mm"))</td>
                <td>@item.Lawyer.ArabicName</td>
                <td>@item.ContractTransactionId</td>
                <td>@item.Amount.ToString("N2")</td>
            </tr>
        }
    </tbody>
</table>
