@model BarManegment.Models.Guarantor
@{
    ViewBag.Title = "طباعة كفالة شخصية";
    Layout = "~/Areas/Admin/Views/Shared/_PrintLOanayout.cshtml";
    var loan = Model.LoanApplication;
}

@section styles {
    <style>
        .print-container {
            direction: rtl;
            background: #fff;
            padding: 20mm;
            margin: 20px auto;
            font-family: 'Times New Roman', Times, serif;
            font-size: 14pt;
            line-height: 1.8;
            position: relative;
        }

        .print-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid #dc3545;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

            .print-header .logo-container {
                display: flex;
                align-items: center;
            }

            .print-header img {
                max-height: 80px;
                margin-left: 15px;
            }

            .print-header .title-text {
                font-family: 'Cairo', sans-serif;
                font-size: 1.5rem;
                font-weight: bold;
                margin: 0;
                color: #000;
            }

            .print-header .subtitle-text {
                font-size: 1rem;
                font-weight: bold;
                margin: 0;
                color: #333;
            }

            .print-header .loan-id {
                border: 1px solid #000;
                padding: 5px 10px;
                font-weight: bold;
            }

        .print-title {
            text-align: center;
            font-weight: bold;
            font-size: 24pt;
            text-decoration: underline;
            margin: 30px 0;
        }

        .print-body p {
            margin-bottom: 15px;
            text-align: right;
        }

        .form-field {
            font-weight: bold;
            font-family: 'Cairo', sans-serif;
            text-decoration: underline;
            padding: 0 5px;
        }

        /* (جدول بيانات الكفيل) */
        .guarantor-table {
            width: 100%;
            line-height: 2.5;
        }

            .guarantor-table td {
                padding: 5px;
                font-family: 'Cairo', sans-serif;
            }

                .guarantor-table td:first-child {
                    width: 15%;
                    font-weight: bold;
                }

                .guarantor-table td:nth-child(2) {
                    width: 35%;
                    border-bottom: 1px dotted #000;
                    font-weight: bold;
                }

                .guarantor-table td:nth-child(3) {
                    width: 15%;
                    font-weight: bold;
                }

                .guarantor-table td:nth-child(4) {
                    width: 35%;
                    border-bottom: 1px dotted #000;
                    font-weight: bold;
                }

        /* (جدول بيانات القرض) */
        .loan-table {
            width: 100%;
            border: 1px solid #000;
            border-collapse: collapse;
            margin-top: 15px;
            font-family: 'Cairo', sans-serif;
            font-size: 12pt;
        }

            .loan-table th, .loan-table td {
                border: 1px solid #000;
                padding: 8px;
                text-align: center;
            }

            .loan-table th {
                background-color: #f2f2f2;
            }

        .signature-area {
            margin-top: 50px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            font-weight: bold;
        }

        @@media print {
            body {
                background: #fff;
            }

            .print-container {
                border: none;
                padding: 0;
                margin: 0;
            }

            .print-footer-layout {
                display: none;
            }
        }
    </style>
}

<div class="print-container">

    @* --- رأس الصفحة --- *@
    <div class="print-header">
        <div class="logo-container">
            <img src="@Url.Content("~/Content/Images/logo.png")" alt="شعار نقابة المحامين" />
            <div>
                <h2 class="title-text">نقابة المحامين الفلسطينيين</h2>
                <p class="subtitle-text">PALESTINIAN BAR ASSOCIATION</p>
            </div>
        </div>
        <div class="loan-id">
            رقم القرض/ @Model.LoanApplicationId
        </div>
    </div>

    <div class="print-title">
        كفالة شخصية
    </div>

    @* --- جسم النموذج --- *@
    <div class="print-body">

        @* (بيانات الكفيل بناءً على نوعه) *@
        @if (Model.GuarantorType == "Lawyer")
        {
            <table class="guarantor-table">
                <tr>
                    <td>نعم انا /</td>
                    <td class="form-field">@Model.LawyerGuarantor.ArabicName</td>
                    <td>احمل هوية رقم/</td>
                    <td class="form-field">@Model.LawyerGuarantor.User.IdentificationNumber</td>
                </tr>
                <tr>
                    <td>تاريخ الميلاد /</td>
                    <td class="form-field">@Model.LawyerGuarantor.BirthDate.ToString("yyyy-MM-dd")</td>
                    <td>اعمل في /</td>
                    <td class="form-field">مكتب محاماة</td>
                </tr>
            </table>
        }
        else
        {
            <table class="guarantor-table">
                <tr>
                    <td>نعم انا /</td>
                    <td class="form-field">@Model.ExternalName</td>
                    <td>احمل هوية رقم/</td>
                    <td class="form-field">@Model.ExternalIdNumber</td>
                </tr>
                <tr>
                    <td>تاريخ الميلاد /</td>
                    <td class="form-field"></td>
                    <td>اعمل في /</td>
                    <td class="form-field">@Model.Workplace</td>
                </tr>
                <tr>
                    <td>بوظيفة /</td>
                    <td class="form-field">@Model.JobTitle</td>
                    <td>من تاريخ /</td>
                    <td class="form-field"></td>
                </tr>
                <tr>
                    <td>براتب اساسي /</td>
                    <td class="form-field"></td>
                    <td>صافي الراتب /</td>
                    <td class="form-field">@Model.NetSalary?.ToString("N2")</td>
                </tr>
                <tr>
                    <td>اسم البنك /</td>
                    <td class="form-field">@Model.BankName</td>
                    <td>رقم حساب /</td>
                    <td class="form-field">@Model.BankAccountNumber</td>
                </tr>
                <tr>
                    <td>عنوان السكن /</td>
                    <td class="form-field"></td>
                    <td>هاتف العمل /</td>
                    <td class="form-field"></td>
                </tr>
                <tr>
                    <td>الجوال /</td>
                    <td class="form-field"></td>
                    <td>الهاتف /</td>
                    <td class="form-field"></td>
                </tr>
            </table>
        }

        <p style="margin-top: 25px; text-align: justify; line-height: 1.8; font-size: 13pt;">
            <strong>إقرار الكفيل بالكفالة:</strong>
            <br />
            اقر بأنني فوضت جهة عملي بخصم اية مبالغ مستحقة لنقابة المحامين الفلسطينيين بدون قيد او شرط
            فور طلب النقابة ذلك مقابل كفالة عرم واداء للمقترض الموضحة بياناته ادناه بحد اقصى قيمة القرض
            قبور طلبات النقابة ذلك مقابل كفالة عرم واداء للمقترض الموضحة بياناته ادناه بحد اقصى قيمة القرض
            وفق الشروط المقررة في النقابة، وفي حال انهاء خدماتي من عملي الحالي لاي سبب فانني اقبل
            بخصم جميع مستحقات النقابة دفعة واحدة من استحقاقاتي لدى جهة عملي او المؤسسة العامة
            للتقاعد او التامينات الاجتماعية واتحاد جميع الاجراءات النظامية والقانونية واقر بالموافقة على مشاركة
            بياناتي الائتمانية مع نقابة المحامين الفلسطينيين. كما اقر بعدم المطالبة بالغاء هذه الكفالة او
            تخفيض القسط او المطالبة بارقاف الخصم من راتبي بعد تاخر مكفولي حتى سداد كامل القرض واخلاء
            مسؤولية نقابة المحامين من اى مطالبات بيني وبين المقترض ويحق لنقابة المحامين تحويل اى مبلغ
            يدخل للكفيل لحساب نقابة المحامين الفلسطينيين ويحق للنقابة قبضه وصرفه واستلامه ايضا باي
            وسيلة كانت دون معارضة مني.
        </p>

        <h6>معلومات القرض</h6>
        <table class="loan-table">
            <thead>
                <tr>
                    <th>اسم المقترض / هوية رقم</th>
                    <th>نوع القرض</th>
                    <th>قيمة المبلغ المكفول</th>
                    <th>العملة</th>
                    <th>مدة السداد بالشهور</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>@Model.LoanApplication.Lawyer.ArabicName <br /> (@Model.LoanApplication.Lawyer.User.IdentificationNumber)</td>
                    <td>@Model.LoanApplication.LoanType.Name</td>
                    <td>@Model.LoanApplication.Amount.ToString("N2")</td>
                    <td>@Model.LoanApplication.LoanType.BankAccount.Currency.Symbol</td>
                    <td>@Model.LoanApplication.InstallmentCount</td>
                </tr>
            </tbody>
        </table>

        <div class="signature-area">
            <div>
                التاريخ / <span class="form-field">@DateTime.Now.ToString("yyyy/MM/dd")</span>
            </div>
            <div>
                توقيع الكفيل /
            </div>
        </div>

    </div>
</div>

@section scripts {
    <script>
        window.addEventListener("load", function () {
            window.print();
        });
    </script>
}